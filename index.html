<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
          content="width=device-width, initial-scale=1.0">
   
</head>

<body>

    <form id="form" >
        <h1>Contact Us</h1>
        <label for="firstname">Firstname:</label>
		<input type="text" id="firstname" class="formIttem"  placeholder="Enter your firstname" name="firstname"  />
		<br/>
		<p class="errors" id="firstnameErr"></p>
		<br/>
		
		<label for="lastname">Lastname:</label>
		<input type="text" id="lastname" class="formIttem" placeholder="Enter your lastname" name="lastname"  />
		<br/>
        <p class="errors" id="lastnameErr"></p>
		
		
	<br/>
	  
	  
	  <label for="email"/>Email Address:</label>
	  <input type='email' id='email' class="formIttem" placeholder='Enter a vaild email' />
	  
	  
	  <br/>
	  
	  <label for="phone"/>phone number:</label>
	  <input type='text' id='phone' class="formIttem" placeholder='e.g. (1)1234567' />
	  
	  
	  <br/>
	  
	   <p class="errors" id="phoneErr"></p>
	   
	   <br/>
	  
	  <label for="query-options"/>How can we help you?</label>
	  <select class="formIttem" id="query-options">
			<option>--SELECT--</option>
			<option>General Enquiries</option>
			<option>Support</option>
	  </select>

	<br/>
	
	<label for="query"/>Describe your issue:</label>

	<input type="text" class="formIttem" id="query" placeholder="What's your issue?" name="query"/>
	
	<br/>
        <p class="errors" id="queryTextErr"> </p>

	<br/>

	<input type='checkbox' class="formIttem" name="consent-checkbox" id='consent-checkbox'/>
	<label>By clicking this checkbox and submitting the form I consent to being contacted by the Team </label>
	
	
	<br/>
	
	 <input class="formIttem" type="submit" value="Submit">

    </form>
	
	
	<div id="display-msg"></div>

    <script>
         let form=document.getElementById("form");
		 form.addEventListener("submit",formSubmit);
		 
		
		 
		 
		 function formSubmit(event){
		 
		 event.preventDefault();
		 
		 
		 // input fields values
		 let firstname=event.target.firstname.value;
		 let lastname=event.target.lastname.value;
		 let query=event.target.query.value;
		 let phone=event.target.phone.value;
		 
		 
		 //errors fields
		 let firstnameErr=document.getElementById("firstnameErr");
		 let lastnameErr=document.getElementById("lastnameErr");
		 let queryTextErr=document.getElementById("queryTextErr");
		 let phoneErr=document.getElementById("phoneErr");
		 
		 
		 
		 
	    function validateForm(){
		
		
		    let verified=true;
		 
			 //validation checks 

			 // ensure fields are not empty
			 
			 if(firstname.length===0){
			 
				firstnameErr.textContent="A firstname is required";
				verified=false;
			   
			 }
			 
			 if(lastname.length===0){
			 
				lastnameErr.textContent="A lastname is required";
			    verified=false;
			 }
			 
			 
			 if (query.length===0){
			 
				 queryTextErr.textContent="This field cannot be blank";
				 verified=false;
			 }
			 
			 
			 if (phone.length===0){
			 
				 phoneErr.textContent="Please enter a phone number";
				 verified=false;
				   
			 }
			 
			 // regex for to check valid phone numbers
			  
			  let phoneRegex= /\(?(\d{1,3})\)?\d{7,11}/ ;
			  
			  if (phoneRegex.test(phone)===false){
					 phoneErr.textContent=
			"A valid phone number is required, a valid phone number is in form (countrycode)<number> e.g:(1)12345678";
			 
			 verified=false;
			 }
			 
			  
			  //check for unwanted chracters in phone
			  if (phone.includes("+")|| phone.includes("-")||phone.includes(" ")){
			  
				  phoneErr.textContent="Please re-enter the number without '+', '-' or spaces";
				  verified=false;
			  }
			  
			  if (phone.length>15){
					 phoneErr.textContent=
			"A valid phone number is required, your phome number is too long";
			verified=false;
			  }
			  
			  
			  //if no error in validation after submission clear errors and input fields
			  if(verified){
			   phoneErr.textContent="";
			   firstnameErr.textContent= "";
			   lastnameErr.textContent="";
			   queryTextErr.textContent="";
			   
		
			   
			   console.log("firstname: ",firstname);
			   console.log("lastname: ",lastname);
			   console.log("phone: ",phone);
			   console.log("Query:",query);
			   
			   
			   //code to clear fields should go here
			  }
			 
		    return verified;
		}
		 
		 
		//validate the Form 
		 
		 let displaymsg=document.getElementById("display-msg");
		 
		 if (validateForm()){
		 
		      
			  displaymsg.textContent="Your form submission was successful";
			  
			
			  
			  
		 }else{
		 
			 displaymsg.textContent="There were errors detected, please re-check before submission";
		 
		 }
		 
		 
		
	}	 
		
		
		
		
		
    </script>
</body>

</html>
